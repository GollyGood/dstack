{"name":"bluepill","version":"2.4.3","description":"Installs bluepill gem and configures to manage services, includes bluepill_service LWRP","long_description":"# bluepill Cookbook\n[![Build Status](https://travis-ci.org/chef-cookbooks/bluepill.svg?branch=master)](https://travis-ci.org/chef-cookbooks/bluepill) [![Cookbook Version](https://img.shields.io/cookbook/v/bluepill.svg)](https://supermarket.chef.io/cookbooks/bluepill)\n\nInstalls bluepill Ruby Gem and configures it to manage services. Also includes a LWRP.\n\n## Requirements\n### Platforms\nBluepill is a pure Ruby service management tool/library, so this cookbook should work on any system. The attributes do set up paths based on FHS locations, see below.\n\n### Chef\n- Chef 12+\n\n### Cookbooks\n- none\n\n## Attributes\nDefault locations for bluepill are in \"FHS compliant\" locations.\n- `node[\"bluepill\"][\"bin\"]` - Path to bluepill program, default is 'bluepill' in the RubyGems binary directory.\n- `node[\"bluepill\"][\"logfile\"]` - Location of the bluepill log file, default \"/var/log/bluepill.log\".\n- `node[\"bluepill\"][\"conf_dir\"]` - Location of service config files (pills), default \"/etc/bluepill\".\n- `node[\"bluepill\"][\"pid_dir\"]` - Location of pidfiles, default \"/var/run/bluepill\"\n- `node[\"bluepill\"][\"state_dir\"]` - Location of state directory, default \"/var/lib/bluepill\"\n- `node[\"bluepill\"][\"init_dir\"]` - Location of init script directory, default selected by platform.\n- `node[\"bluepill\"][\"version\"]` - Version of bluepill to install, default is latest.\n- `node[\"bluepill\"][\"use_rsyslog\"]` - Enable configuration and use of rsyslog for bluepill.\n\n# Custom Resources\nThis cookbook contains an LWRP, `bluepill_service`. This can be used with the normal Chef service resource, by using the `provider` parameter, or by specifying the `bluepill_service` shortcut. These two resources are equivalent.\n\n```ruby\nservice 'my_app' do\n  provider bluepill_service\n  action [:enable, :load, :start]\nend\n\nbluepill_service 'my_app' do\n  action [:enable, :load, :start]\nend\n```\n\nThe load action should probably always be specified, to ensure that if bluepill isn't running already it gets started. The\n\nThe recipe using the service must contain a template resource for the pill and it must be named `my_app.pill.erb`, where `my_app` is the service name passed to the bluepill service resource.\n\n## Usage\nBe sure to include the bluepill recipe in the run list to ensure that the gem and bluepill-related directories are created. This will also make the cookbook available on the system and other cookbooks won't need to explicitly depend on it in the metadata.\n\nIf the default directory locations in the attributes/default.rb aren't what you want, change them by setting them either in the attributes file itself, or create attributes in a role applied to any systems that will use bluepill.\n\nExample pill template resource and .erb file:\n\n```ruby\ntemplate '/etc/bluepill/my_app.pill' do\n  source 'my_app.pill.erb'\nend\n\nBluepill.application('my_app') do |app|\n  app.process('my_app') do |process|\n    process.pid_file = '/var/run/my_app.pid'\n    process.start_command = '/usr/bin/my_app'\n  end\nend\n```\n\nSee bluepill's documentation for more information on creating pill templates.\n\n## Testing\nThis cookbook has the following [ChefSpec custom matchers](https://github.com/sethvargo/chefspec#packaging-custom-matchers) defined:\n\n- enable_bluepill_service\n- load_bluepill_service\n- reload_bluepill_service\n- start_bluepill_service\n- disable_bluepill_service\n- stop_bluepill_service\n- restart_bluepill_service\n\n### ChefSpec Examples:\n\n```\nit 'enables my_app bluepill service' do\n  chef_run.converge('my_app::default', described_recipe)\n  expect(chef_run).to enable_bluepill_service('my_app')\nend\n\nit 'reloads my_app bluepill service when pill file changes' do\n  chef_run.converge('my_app::default', described_recipe)\n  expect(chef_run).to create_template('/etc/bluepill/my_app.pill')\n  my_app_pill = chef_run.template('/etc/bluepill/my_app.pill')\n  expect(my_app_pill).to notify('bluepill_service[my_app]').to(:reload).delayed\nend\n```\n\n## License & Authors\n**Author:** Cookbook Engineering Team ([cookbooks@chef.io](mailto:cookbooks@chef.io))\n\n**Copyright:** 2010-2015, Chef Software, Inc.\n\n```\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n```\n","maintainer":"Chef Software, Inc.","maintainer_email":"cookbooks@chef.io","license":"Apache 2.0","platforms":{},"dependencies":{"rsyslog":">= 2.0"},"recommendations":{},"suggestions":{},"conflicting":{},"providing":{},"replacing":{},"attributes":{},"groupings":{},"recipes":{"bluepill::default":"Installs bluepill rubygem and sets up management directories"}}